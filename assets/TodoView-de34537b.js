import{b as T,d as L,r as V,e as D,o as c,c as d,a as i,F as g,f as h,t as _,g as I,_ as N,h as U,i as b,w as F,v as M,j as x,k as j,u as B,n as q,p as z,l as O}from"./index-b707b58e.js";import{B as w}from"./BaseInput-db4960af.js";const k="/api/todo",R=()=>T.get(`${k}`),G=e=>T.post(`${k}`,e),H=e=>T.delete(`${k}/${e}`),J=(e,l)=>T.put(`${k}/${e}`,l),K=L("todo",()=>{const e=V([]),l=D(()=>e.value),y=s=>D(()=>e.value.find(p=>p.id===s));async function u(){try{const{data:s}=await R();e.value=s}catch({message:s,error:p}){throw s??p}}async function a(s){try{await G(s),await u()}catch({message:p,error:m}){throw p??m}}return{getTodo:l,init:u,getDetail:y,addTodo:a,removeTodo:async s=>{try{await H(s),await u()}catch({message:p,error:m}){throw p??m}},editTodo:async(s,p)=>{try{await J(s,p),await u()}catch({message:m,error:f}){throw m??f}}}});const P={key:0},Q={key:0},W=["onClick"],X={__name:"BaseTable",props:{columns:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]}},setup(e){return(l,y)=>(c(),d("table",null,[i("thead",null,[i("tr",null,[(c(!0),d(g,null,h(e.columns,(u,a)=>(c(),d("th",{key:a},_(u),1))),128)),e.actions.length?(c(),d("th",P,"action")):I("",!0)])]),i("tbody",null,[(c(!0),d(g,null,h(e.data,(u,a)=>(c(),d("tr",{key:a},[(c(!0),d(g,null,h(e.columns,(r,v)=>(c(),d("td",{key:v},_(u[r]),1))),128)),e.actions.length?(c(),d("td",Q,[(c(!0),d(g,null,h(e.actions,(r,v)=>(c(),d("button",{key:v,onClick:s=>l.$emit(`${r.event}`,u)},_(r.title),9,W))),128))])):I("",!0)]))),128))])]))}};const $=e=>(z("data-v-12a52a0c"),e=e(),O(),e),Y={class:"container"},Z=["onSubmit"],ee={class:"checkbox"},te=$(()=>i("button",{type:"reset"},"Cancel",-1)),oe={type:"submit"},ae=$(()=>i("h4",null,"Tasks",-1)),ne={class:"list"},le=["onDblclick"],se=["onClick","disabled"],ce=["onClick","disabled"],de=$(()=>i("h4",null,"Table",-1)),ie={__name:"TodoView",setup(e){const l=K(),y={title:"",description:"",category:"",completed:!1},u={columns:["id","title","description","completed"],actions:[{title:"log",event:"log-event"},{title:"toggle",event:"toggle-event"}]},a=V({...y}),r=V(!1),v=()=>{Object.assign(a.value,y),r.value=!1};async function s(){const n={...a.value};r.value===!1?await l.addTodo(n):await l.editTodo(r.value,n),v()}async function p(n,o){o>-1&&l.removeTodo(n)}function m(n){const o=l.getDetail(n);a.value={...o.value},r.value=n}async function f(n){const o=l.getDetail(n);await l.editTodo(n,{...o.value,completed:!o.value.completed})}async function E(n){try{console.log(n)}catch(o){console.error(o)}}async function A(n){try{await f(n.id)}catch(o){console.error(o)}}return U(async()=>await l.init()),(n,o)=>{var C;return c(),d("div",Y,[i("h1",null,"Create Todo List "+_((C=n.$route.params)==null?void 0:C.id),1),i("form",{class:"form",onSubmit:j(s,["prevent"]),onReset:v},[b(w,{modelValue:a.value.title,"onUpdate:modelValue":o[0]||(o[0]=t=>a.value.title=t),name:"Title",placeholder:"Insert Title",required:""},null,8,["modelValue"]),b(w,{modelValue:a.value.description,"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.description=t),name:"Description",placeholder:"Insert Description",required:""},null,8,["modelValue"]),b(w,{modelValue:a.value.category,"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.category=t),name:"Category",placeholder:"Todo"},null,8,["modelValue"]),i("div",ee,[F(i("input",{type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=t=>a.value.completed=t),name:"completed"},null,512),[[M,a.value.completed]]),x(" Completed ")]),te,i("button",oe,_(r.value!==!1?"Save":"Submit"),1)],40,Z),ae,i("ol",ne,[(c(!0),d(g,null,h(B(l).getTodo,(t,S)=>(c(),d("li",{key:S,class:q({strike:t==null?void 0:t.completed}),onDblclick:re=>f(t.id)},[i("button",{class:"red",onClick:()=>p(t.id,S),disabled:r.value!==!1},"×",8,se),i("button",{class:"orange",onClick:()=>m(t.id),disabled:r.value!==!1},"✎",8,ce),x(" "+_(t==null?void 0:t.title)+" - "+_(t!=null&&t.description?t.description:""),1)],42,le))),128))]),de,b(X,{data:B(l).getTodo,columns:u.columns,actions:u.actions,onLogEvent:E,onToggleEvent:A},null,8,["data","columns","actions"])])}}},ve=N(ie,[["__scopeId","data-v-12a52a0c"]]);export{ve as default};
